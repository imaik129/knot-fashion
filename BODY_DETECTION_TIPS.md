# 🔍 人体検出の改善方法

## 現在の問題

ROMPがビデオから人体を検出できない場合があります。これは以下の理由による可能性があります：

1. **検出感度の設定**
2. **ビデオの品質**
3. **人物の姿勢や位置**

## ✅ 実装した改善

### 1. 検出感度の向上
- `center_thresh`を0.25から0.15に下げました（より敏感な検出）
- フレームの前処理を改善（リサイズ、BGR→RGB変換）

### 2. エラーメッセージの改善
- より分かりやすいエラーメッセージ
- 検出に失敗した場合のヒントを表示

### 3. フロントエンドの改善
- エラーメッセージに検出のヒントを追加
- ユーザーに最適なビデオ撮影方法を案内

## 📹 最適なビデオの条件

### ✅ 推奨される条件

1. **照明**
   - 明るく均一な照明
   - 影を避ける
   - 逆光を避ける

2. **背景**
   - シンプルで単色の背景
   - 人物とコントラストがある
   - 複雑な模様を避ける

3. **姿勢**
   - A-pose（腕を少し広げる）
   - T-pose（腕を完全に広げる）
   - 正面を向く

4. **服装**
   - タイトフィットの服装（アクティブウェアなど）
   - 体の輪郭が分かりやすい

5. **フレーミング**
   - 全身がフレーム内に収まる
   - 頭から足まで完全に見える
   - カメラは安定している（三脚推奨）

6. **動き**
   - ゆっくりとした動き
   - 急激な動きを避ける
   - 数秒間同じ姿勢を保つ

## 🔧 技術的な改善

### 検出感度の調整
```python
settings.center_thresh = 0.15  # より低い値 = より敏感
```

### フレーム前処理
- 大きな画像をリサイズ（1024px以下）
- BGR→RGB変換
- 複数フレームの処理

## 🐛 トラブルシューティング

### 検出が失敗する場合

1. **ビデオを確認**
   - 人物が完全に見えるか
   - 照明が十分か
   - 背景が適切か

2. **別のビデオを試す**
   - より明るい環境で撮影
   - よりシンプルな背景で撮影
   - より良い姿勢で撮影

3. **ログを確認**
   - バックエンドのログを確認
   - どのフレームで検出に失敗したか確認

## 📊 期待される結果

改善後は：
- ✅ より多くのビデオで検出が成功
- ✅ より分かりやすいエラーメッセージ
- ✅ ユーザーへの適切なガイダンス


